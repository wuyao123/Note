---
name: 'ibiu-console'
title: '热修复'
owner: '段皓予'
---

middleware:
  mysql:
    - '导入 SQL, http://storage.jd.com/avatar-poc/hotfix/hotfix.sql?Expires=3704027110&AccessKey=6AwLgq9u3tQdnrC6&Signature=zDc2Ar5JlxXjbjvFofA6ogR5jNs%3D'
  api_gateway:
    - '网关需添加两个接口'
    - '后端域名: hotfix2.ctrlle.com'
    - '超时时间: 按最大设置'
    - 'HTTP Method: 自动适配'
    - |
      1、
      API名称: avatarHotfixPackages
      后端路径: /v1/packages
      描述: 阿凡达热修复-获取升级包接口
    - |
      2、
      API名称: avatarHotfixStat
      后端路径: /v1/stat
      描述: 阿凡达热修复-上报统计数据接口

download:
  title: '提前下载好包'
  type: path
  artifact:
    source: 'http://storage.jd.com/avatar-poc/poc-hotfix-zhaodong.zip?Expires=3704262194&AccessKey=6AwLgq9u3tQdnrC6&Signature=W9wY4kuT47pZIgeErNh%2BewGGzuw%3D'

frontend:
  title: '网站前端'
  type: staticAsset
  language: Javascript
  framework: Vue.js
  https: false
  http:
    domain: hotfix3.ctrlle.com
    port: 80
  artifact:
    source: /export/packages/hotfix/hotfix_download/latest/frontend-applications/latest
  config:
    nginx:
      generator:
        always_serve_index_html: true
        location:
          /hotfix-server/: |-
            proxy_set_header Host hotfix1.ctrlle.com;
            proxy_pass http://hotfix1.ctrlle.com/;
  dependencies:
    nginx: '1.15.8'

console:
  title: '控制台 API'
  type: api
  language: Go
  http:
    domain: hotfix1.ctrlle.com
    port: 4301
  artifact:
    source: /export/packages/hotfix/hotfix_download/latest/avatar-hotfix/latest
  config:
    nginx:
      generator:
        proxy_to_port: true
    go:
      binary_path: 'website'

mobile:
  title: '客户端 API'
  type: api
  language: Go
  http:
    domain: hotfix2.ctrlle.com
    port: 4302
  artifact:
    source: /export/packages/hotfix/hotfix_download/latest/avatar-hotfix-server/latest
  config:
    nginx:
      generator:
        proxy_to_port: true
    go:
      binary_path: 'mobile'
