## 为什么会有微任务和宏任务

- 保证一致的执行顺序。当想让某几个任务异步执行，又想让彼此之间的顺序不乱，就可以使用microtask，而不用setTimeout。
- 保证一致的执行环境。假设宏任务有可能改变数据，我们就可以把一些数据分析放到微任务中，确保使用的数据未被下一次宏任务修改。


## js 执行机制
1. 执行主任务
2. 全部主任务执行完之后，执行微任务栈中的所有微任务
3. 任务队列里弹出一个可执行的宏任务，执行
4. 宏任务执行完之后，再次执行微任务栈中所有的微任务